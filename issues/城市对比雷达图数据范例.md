# 城市对比雷达图数据范例

## 当前API返回的数据结构

目前API返回的数据结构如下：

```json
{
  "code": 200,
  "data": {
    "city_company_size": {
      "上海": {
        "1000-5000": 299,
        "150-500": 520,
        "50-150": 568,
        "500-1000": 220,
        "5000-10000": 64,
        "<50": 234,
        ">10000": 68
      },
      "北京": {
        "1000-5000": 216,
        "150-500": 244,
        "50-150": 258,
        "500-1000": 148,
        "5000-10000": 44,
        "<50": 78,
        ">10000": 51
      },
      "广州": {
        "1000-5000": 250,
        "150-500": 336,
        "50-150": 352,
        "500-1000": 156,
        "5000-10000": 28,
        "<50": 131,
        ">10000": 31
      }
    },
    "city_education": {
      "上海": {
        "博士": 1,
        "在校生": 12,
        "大专": 1065,
        "本科": 885,
        "硕士": 10
      },
      "北京": {
        "博士": 1,
        "在校生": 2,
        "大专": 477,
        "本科": 556,
        "硕士": 3
      },
      "广州": {
        "在校生": 5,
        "大专": 792,
        "本科": 486,
        "硕士": 1
      }
    },
    "city_salary": {
      "上海": 11861.91,
      "北京": 12026.17,
      "广州": 9907.2
    }
  },
  "message": "获取城市对比数据成功"
}
```

## 方案1：基础版数据结构

建议后端提供以下数据结构，增加最低和最高薪资信息：

```json
{
  "code": 200,
  "data": {
    "city_company_size": {
      "上海": {
        "1000-5000": 299,
        "150-500": 520,
        "50-150": 568,
        "500-1000": 220,
        "5000-10000": 64,
        "<50": 234,
        ">10000": 68
      },
      "北京": { /* 公司规模分布数据 */ },
      "广州": { /* 公司规模分布数据 */ }
    },
    "city_education": {
      "上海": {
        "博士": 1,
        "在校生": 12,
        "大专": 1065,
        "本科": 885,
        "硕士": 10
      },
      "北京": { /* 教育程度分布数据 */ },
      "广州": { /* 教育程度分布数据 */ }
    },
    "city_salary": {
      "上海": {
        "avg": 11861.91,
        "min": 8000.00,
        "max": 18000.00
      },
      "北京": {
        "avg": 12026.17,
        "min": 9000.00,
        "max": 20000.00
      },
      "广州": {
        "avg": 9907.2,
        "min": 7000.00,
        "max": 15000.00
      }
    },
    "city_job_counts": {
      "上海": 1973,
      "北京": 1039,
      "广州": 1284
    }
  },
  "message": "获取城市对比数据成功"
}
```

这个数据结构的主要变化：
1. 将 `city_salary` 由简单的城市-薪资映射改为包含平均值、最小值和最大值的对象
2. 新增 `city_job_counts` 字段，直接提供每个城市的职位总数，避免前端计算

## 方案2：增强版数据结构

如果需要更全面的数据对比，建议后端提供以下增强版数据结构：

```json
{
  "code": 200,
  "data": {
    "cities": ["上海", "北京", "广州"],
    "dimensions": {
      "job_count": {
        "name": "职位数量",
        "unit": "个",
        "values": {
          "上海": 1973,
          "北京": 1039,
          "广州": 1284
        }
      },
      "avg_salary": {
        "name": "平均薪资",
        "unit": "元",
        "values": {
          "上海": 11861.91,
          "北京": 12026.17,
          "广州": 9907.2
        }
      },
      "min_salary": {
        "name": "最低薪资",
        "unit": "元",
        "values": {
          "上海": 8000.00,
          "北京": 9000.00,
          "广州": 7000.00
        }
      },
      "max_salary": {
        "name": "最高薪资",
        "unit": "元",
        "values": {
          "上海": 18000.00,
          "北京": 20000.00,
          "广州": 15000.00
        }
      },
      "avg_experience": {
        "name": "平均工作经验要求",
        "unit": "年",
        "values": {
          "上海": 2.5,
          "北京": 3.2,
          "广州": 2.1
        }
      },
      "bachelor_percentage": {
        "name": "本科及以上占比",
        "unit": "%",
        "values": {
          "上海": 45.36,
          "北京": 53.99,
          "广州": 37.93
        }
      }
    },
    "company_size": {
      "上海": {
        "1000-5000": 299,
        "150-500": 520,
        "50-150": 568,
        "500-1000": 220,
        "5000-10000": 64,
        "<50": 234,
        ">10000": 68
      },
      "北京": { /* 公司规模分布数据 */ },
      "广州": { /* 公司规模分布数据 */ }
    },
    "education": {
      "上海": {
        "博士": 1,
        "在校生": 12,
        "大专": 1065,
        "本科": 885,
        "硕士": 10
      },
      "北京": { /* 教育程度分布数据 */ },
      "广州": { /* 教育程度分布数据 */ }
    }
  },
  "message": "获取城市对比数据成功"
}
```

这个增强版数据结构的主要特点：
1. 使用 `dimensions` 对象组织各个维度的数据，便于扩展
2. 每个维度包含名称、单位和各城市的值
3. 增加了更多维度，如平均工作经验要求、本科及以上学历占比等
4. 保留了原有的公司规模和教育程度分布数据

## 前端雷达图实现示例

使用方案1的数据结构，前端雷达图实现示例：

```typescript
// 雷达图配置
const radarOptions = {
  title: {
    text: '城市招聘数据对比',
    left: 'center'
  },
  tooltip: {
    formatter: (params: any) => {
      const city = params.name;
      const data = params.data.value;
      return `${city}<br/>
             职位数量: ${data[0]}<br/>
             平均薪资: ${data[1].toFixed(2)}元<br/>
             最低薪资: ${data[2].toFixed(2)}元<br/>
             最高薪资: ${data[3].toFixed(2)}元<br/>
             占比: ${data[4].toFixed(2)}%`;
    }
  },
  legend: {
    data: ['上海', '北京', '广州'],
    bottom: '5%'
  },
  radar: {
    indicator: [
      { name: '职位数量', max: 2500 },
      { name: '平均薪资(元)', max: 15000 },
      { name: '最低薪资(元)', max: 12000 },
      { name: '最高薪资(元)', max: 25000 },
      { name: '占比(%)', max: 100 }
    ]
  },
  series: [{
    name: '城市招聘数据',
    type: 'radar',
    data: [
      {
        value: [1973, 11861.91, 8000.00, 18000.00, 46.00],
        name: '上海',
        itemStyle: { color: '#e74c3c' }
      },
      {
        value: [1039, 12026.17, 9000.00, 20000.00, 24.20],
        name: '北京',
        itemStyle: { color: '#3498db' }
      },
      {
        value: [1284, 9907.20, 7000.00, 15000.00, 29.80],
        name: '广州',
        itemStyle: { color: '#2ecc71' }
      }
    ]
  }]
};
```

## 建议

1. 建议优先实现方案1，提供更准确的薪资数据，满足基本的对比需求
2. 如果有更多数据可用，可以考虑实现方案2，提供更全面的城市对比
3. 无论选择哪种方案，都应确保数据的真实性和准确性，不使用估算值 